<HTML>
	 <head>
        <script src="jquery.js"></script>
        
        <script src="queryExecutor.js"></script>

        <script src="tableResultManager.js"></script>
		<script src="operatorManager.js"></script>
		<script src="languageManager.js"></script>	
		<script src="queryVerbalizator.js"></script>
		<script src="queryBuilder.js"></script>
		<script src="mapCreator.js"></script>
		<script src="boxFiller.js"></script>

		<script src="boxViewer.js"></script>
		<script src="queryViewer.js"></script>
		<script src="operatorViewer.js"></script>
		<script src="tableResultViewer.js"></script>

		<script src="utilLogicLayer.js"></script>
		<script src="utilPresentationLayer.js"></script>


		<script src="Materialize/js/materialize.min.js"></script>
		<link href="Materialize/fonts/roboto/Roboto-Regular.woff" rel="application/x-font-woff">	
		<link href="Materialize/fonts/roboto/Roboto-Regular.woff2" rel="application/x-font-woff">		
		<link href="Materialize/css/materialize.min.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

		<style>

			body {
				background-color: #f5f5f5;
				font-family: 'Roboto', sans-serif;
			}

			div#queryBox{
				margin-top: 30px;
			}

			div#conceptsListBox {
				height: 300px;
			    overflow: auto;
			    border-radius:2px;
			    background-color:#f5f5f5; 
			}

			div#conceptsBox .card-action{
				background-color:#00e676;
			}

			div .card-action i{
				cursor: pointer;
			}

			div#predicatesListBox {
			    height: 300px;
			    overflow: auto;
			}

			div#contentOperatorBox{
				overflow: auto;
			    height: 300px;
			}

			/*div#resultsTableBox {
			    height: 500px;
			    overflow: scroll;
			}*/

			span.highlighted {
				background-color: #fff59d   ;
				border-radius: 4px;
			}

			span.highlightRemove {
				background-color: #fff59d   ;
				border-radius: 4px;
			}

			span.concept {
				color: #00e676;
				font-weight: bold;
			}

			span.predicate {
				color: #7c4dff ;
				font-weight: bold;
			}

			span.operator {
				text-decoration-line: underline;
			    text-decoration-color: #bdbdbd;
			    text-decoration-style: dashed;
			}

			span.barred {
				text-decoration-line: line-through;
			}

			img.imgResult {
				height: 10px;
			}

			#myTabs>li.indicator{
				display:none;
			}
			#myTabs li{
				border-bottom: 1px solid #ddd
			}

			#sparqlQuery{
				margin-top: -40px;
				float:right;
			}

			#queryNaturalLanguage ul{
				padding-left: 0.8em;
    			margin: 0;
			}

			#removeButton {
				height: 20px;
			}

			#removeButton:hover{
				cursor: pointer;
			}

			span {
				padding:3px !important;
			}

			/*::-webkit-scrollbar {
			    width: 9px;
			    height: 9px;
			}
			::-webkit-scrollbar-track {
			    background: #eee;
			    border: thin solid lightgray;
			    box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.1) inset;
			}
			::-webkit-scrollbar-thumb {
			    background: #999;
			    border: thin solid gray;
			}*/

			.tabs #conceptsTab a:hover,
			.tabs #conceptsTab a.active{
				background-color: #00e676;
				color: white;
			}

			.tabs #conceptsTab a{
				color:#00e676;
			}

			.tabs #predicatesTab a:hover,
			.tabs #predicatesTab a.active{
				background-color: #7c4dff ;
				color: white;
			}

			.tabs #predicatesTab a{
				color:#7c4dff;
			}

			.tabs #operatorsTab a:hover,
			.tabs #operatorsTab a.active{
				background-color: #bdbdbd;
				color: white;
			}

			.tabs #operatorsTab a{
				color:#bdbdbd;
			}

			.tabs #queryTab a:hover,
			.tabs #queryTab a.active{
				background-color: #f44336;
				color: white;
			}

			.tabs #queryTab a{
				color:#f44336;
			}

			.addToQuery:hover{
				font-weight: bold;
				cursor:pointer;
			}

			input {
			  border-bottom: none!important;
			  box-shadow: none!important;
			}

			span.mySearch input{
				margin-bottom: auto !important;
			}

			ul:empty{
				display: none;
			}

			/*#pendingQuerySpan .fieldToComplete{
				text-decoration-line: underline;
			    text-decoration-color: #bdbdbd;
			    text-decoration-style: dashed;
			}*/

			#pendingQuerySpan .active{
				color: #2196f3; 
				font-weight: bold;
			}
/*
			#overlay{
				height: -webkit-fill-available;
				width: -webkit-fill-available;
			    background-color: black;
			    z-index: 10;
			    position: fixed;
			    opacity: 0.3;
			}*/
/*
			span.mySearch:not(browser-default):active.not([readonly])+label{
				color:red;
			}
*/
			.input-field label:not(.label-icon).active{
				transform: translateY(-4px) scale(0.8);
				
			}

			.scrollableTableContent thead tr:after{
				display : block;
				width:100%;
				overflow-y: scroll;
				visibility:hidden;
				height:0;
			}
			.scrollableTableContent thead th{
				flex:1;
				display:block;
			}
			.scrollableTableContent tbody{
				display : block;
				height: 400px;
				overflow-y: auto;
				width:100%;
			}
			.scrollableTableContent tr{
				width:100%;
				display:flex;	
			}
			.scrollableTableContent td{
				flex:1;
			}

			input.userValue{
				border-bottom: 1px solid #9e9e9e !important;
			}

			#rowUserValue{
				margin-bottom: 0;
			}

			i#userValueButton{
				float: right;
				margin-top: 2rem;
			}

			#navBar, #fieldsCollectionNavBar{
				padding-left: 0;
			    padding-right: 0;
			    height: -webkit-fill-available;
			    background-color: white;
			    -webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.2);
    			box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.2);
			}

			#conceptsListBox ul{
				border : none;
			}

			li.withMargin {
				margin-top:0.2em !important;
			}
		</style>

	</head>
	<body>
		<!--<div id="overlay">
		</div>-->
		<div class="container">
		  	<div class="row">
				<div id="queryBox" class="col s12">	
					<div class="card">
						<div id="queryNaturalLanguage" class="card-content">
							<span id="span1">Give me...</span>
							<a class="btn-floating btn btn-small waves-effect waves-light blue modal-trigger" id="sparqlQuery" href="#modalSPARQL"><i class="material-icons">share</i></a>

							<div id="modalSPARQL" class="modal">
							    <div class="modal-content">
							      <h4>SPARQL query</h4>
							      <p>A bunch of text</p>
							    </div>
							    <div class="modal-footer">
							      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
							    </div>
							  </div>

						</div>
						<div class="card-action blue white-text">
							<span class="white-text"> Focus: <span id="focus">-</span> </span>

				              <span class="right">
				              <i class="small material-icons white-text" id="removeButton" 
				              	title="Remove all the highlighted"
				              	onmouseover="highlightElementsToRemove();" 
				              	onmouseleave="removeHighlightElementsToRemove();" 
				              	onclick="mapCreator.removeElement($('.highlighted').attr('meta-removereference'));">highlight_off</i>
				            </span>
						</div>
					</div>
				</div>
				
				
			</div>
		</div>

		<div class="divider"></div>

		<div class="row">

			<div class="col s3" id="navBar">
		      <ul id="myTabs" class="tabs black-text" style="display: table-cell;border-right: 4px solid #00e676;">
		   
		        <li class="tab col s12" id="conceptsTab" onclick="$('#myTabs').css('border-right-color', '#00e676')">	<a href="#conceptsBox">Concepts</a>
		        </li>
		        <li class="tab col s12" id="predicatesTab" onclick="$('#myTabs').css('border-right-color', '#7c4dff ')">
		        	<a href="#predicatesBox">Predicates</a>
		        </li>
		        <li class="tab col s12" id="operatorsTab" onclick="$('#myTabs').css('border-right-color', '#bdbdbd')">
		        	<a href="#operatorsBox">Operators</a>
		        </li>
		        <li class="tab col s12" id="queryTab" onclick="$('#myTabs').css('border-right-color', '#f44336')">
		        	<a href="#dacambiareBox">Query</a>
		        </li>
		      </ul>
		    </div>
		   
		    <div class="col s9">
		        <!-- page content  -->
		        <div class="col s12">

		        	<div id="conceptsBox" class="card">
			            <div class="card-content ">
			              <span class="card-title">Concepts</span>

			              	  <div class="card">
	            				<div class=" valign-wrapper ">
				            		<span class="input-field col s11 m11 l11 mySearch">
						              	<input type="search" id="searchConceptsBox" 
											onkeyup="filter('searchConceptsBox', 'conceptsListBox')" 
											title="Type in a concept">
										<label for="searchConceptsBox">Search for a concept</label>
									</span>
									<span class="col s2 m2 l2 right">
										<i class="material-icons"> search</i>
									</span>
								</div>
							  </div>
							 
							<div id="conceptsListBox">
								<ul id="conceptsList" class="collection"></ul>
							</div>
			            </div>
			            <div class="card-action valign-wrapper">
			              	<span class="col s1" id="hierarchySpan"></span>
			            </div>
			          </div>

			          <div id="predicatesBox" class="card">
			            <div class="card-content ">
			              <span class="card-title">Predicate</span>

		              	  <div class="card">
            				<div class=" valign-wrapper ">
			            		<span class="input-field col s11 m11 l11 mySearch">
					              	<input type="search" id="searchPredicatesBox" 
										onkeyup="filter('searchPredicatesBox', 'predicatesBox')" 
										title="Type in a predicate">
									<label for="searchPredicatesBox">Search for a predicate</label>
								</span>
								<span class="col s2 m2 l2 right">
									<i class="material-icons"> search</i>
								</span>
							</div>
						  </div>
						  	<ul class="tabs tabs-fixed-width" id="predicatesTab">
						  		<li class="tab"><a class="active" href="#direct">Direct</a></li>
				        		<li class="tab"><a href="#reverse">Reverse</a></li>
						  	</ul>
						  </div>
			            <div id="direct">
					      	<div id="predicatesListBox">
					      		<ul id="directPredicatesList" class="collection"></ul>
					      	</div> 
					    </div>
					      <div id="reverse">
					      	<div id="predicatesListBox">
					      		<ul id="reversePredicatesList" class="collection"></ul>
					      	</div>
					      </div>
			            <!--<div id="predicatesListBox">
								<ul id="predicatesList"></ul>
							</div>-->
			          </div>

					  <div id="operatorsBox" class="card">
			            <div class="card-content">
			              <span class="card-title">Operators</span>
			              <span id="pendingQuerySpan"></span>
			              <div id="contentOperatorBox">
				              <ul id="operatorList" class="collection"></ul>
				              <ul id="reusableResultList" class="collection"></ul>
				          </div>
						<!--<input type="text" id="searchResultsBox" class="search"
							onkeyup="filter('searchResultsBox', 'resultsBox')" 
							placeholder="Search for a result..." title="Type in a result">-->
			            </div>
			          </div>

			          <div id="dacambiareBox" class="card">
			            <div class="card-content ">
			              <span class="card-title">Other query</span>
			            </div>
			          </div>
				</div>

	      	</div>

	    </div><!--end row-->

	    <!--start result table-->
		<div class="row">
			<div id="fieldsCollectionNavBar" class="col s3">
				<ul id="fieldsCollection" class="collection" ></ul>
			</div>
			<div class="col s9">
				<div id="resultsTableBox" class="card col s12 scrollableTableContent">
					<div class="card-content ">
			              <span class="card-title">Results</span>
			              <table id="resultsTable" class="striped centered">
						</table>
			              	  
			        </div>				
				</div>
			</div>
		</div>
		<!--end result table-->
		

		
<!--
			<ul class="collection">
		        
		        <li class="collection-item green accent-3 white-text">Concepts</li>
		        <li class="collection-item deep-purple accent-2 white-text" >Predicates</li>
		        <li class="collection-item grey lighten-1 white-text" >Operators</li>
		        <li class="collection-item red white-text" >Explore</li>
		    </ul>
-->
	</body>

	<script>
		
		$(document).ready(function(){


			$(document).ready(function(){
			    // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
			    $('#overlay').hide();
			    $('.modal').modal();
			    $('ul.tabs').tabs({onShow: function(tab) {
			    	if(tab[0].id == "predicatesBox"){
			    		$('ul#predicatesTab').tabs();
			    	}}
			    });
			});

			initBoxViewer();
			initQueryViewer();
			initOperatorViewer();

			fillConcepts();
			fillPredicates();


		});

	</script>

</HTML>
