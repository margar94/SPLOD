<HTML>
	 <head>
        <script src="jquery.js"></script>
        
        <script src="queryExecutor.js"></script>

		<script src="resultManager.js"></script>
		<script src="languageManager.js"></script>	
		<script src="queryVerbalizator.js"></script>
		<script src="queryBuilder.js"></script>
		<script src="mapCreator.js"></script>
		<script src="boxFiller.js"></script>

		<script src="boxViewer.js"></script>
		<script src="queryViewer.js"></script>
		<script src="resultViewer.js"></script>

		<script src="utilLogicLayer.js"></script>

		<script src="Materialize/js/materialize.min.js"></script>
		<link href="Materialize/fonts/roboto/Roboto-Regular.woff" rel="stylesheet">	
		<link href="Materialize/fonts/roboto/Roboto-Regular.woff2" rel="stylesheet">		
		<link href="Materialize/css/materialize.min.css" rel="stylesheet">

		<style>

			body {
				font-family: 'Roboto', sans-serif;
			}

			div#queryBox{
				margin-top: 30px;
			}

			div#conceptsListBox {
				height: 300px;
			    overflow: auto;
			}

			div#predicatesListBox {
			    height: 300px;
			    overflow: auto;
			}

			div#resultsBox {
				position:absolute;
				margin-left: 66%;
				padding: 5px;
			    border: 2px solid red;
			    border-radius: 5px;
			    width: 30%;
			    height: 500px;
			    overflow: auto;
			    display: inline-block;
			}

			div#resultsTableBox {
			    height: 500px;
			    overflow: scroll;
			}

			span.highlighted {
				background-color: #fff59d;
			}

			span.highlightRemove {
				background-color: #fff59d;
			}

			span.concept {
				color: #009688;
				font-weight: bold;
			}

			span.predicate {
				color: #3f51b5;
				font-weight: bold;
			}

			img.imgResult {
				height: 10px;
			}

			li.indicator{
				display:none;
			}

			::-webkit-scrollbar {
			    width: 9px;
			    height: 9px;
			}
			::-webkit-scrollbar-track {
			    background: #eee;
			    border: thin solid lightgray;
			    box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.1) inset;
			}
			::-webkit-scrollbar-thumb {
			    background: #999;
			    border: thin solid gray;
			}

			.tabs #conceptsTab a:hover,
			.tabs #conceptsTab a.active{
				background-color: #009688;
				color: white;
			}

			.tabs #predicatesTab a:hover,
			.tabs #predicatesTab a.active{
				background-color: #3f51b5;
				color: white;
			}


		</style>

	</head>
	<body>
		<div class="container">
		  	<div class="row">
				<div id="queryBox" class="col s12 card">	
					<div id="queryNaturalLanguage">
						<span id="span1">Give me...</span>

					<!--<span>A 
						<span>B 
							<span>
								<ul>
									<li>C <span>E </span> </li>
								</ul>
								<span>D </span>
							</span>
						</span>
					</span>-->

					<!-- 
						onfocuschange su concept, predicate, something
							- chi sottolineare
							- chi mettere nel focus
							- notifica della key che si sta eliminando





					Give me every place that has a label

						tutti gli span focusable tranne give me
					
						<div>give me 
							<span class=> every 
								<span id=key class=concept title=url>place</span>
								<span> that has
									<span id=key class=predicate title=url>label</span>
								</span>
							</span>
						</div>


						Give me every place that is the label of something

						tutti gli span focusable tranne give me
					
						<div>give me 
							<span class=> every 
								<span id=key class=concept title=url>place</span>
								<span> that is the
									<span id=key class=predicate title=url>label</span>
									of
									<span id=key class=??? title=url (non significativa)> something</span>
								</span>
							</span>
						</div>

					-->

					</div>
					<div class="card-action">
						
						<a href="#" id="focus">element on focus: nothing</a>

						<a href="#" id="removeButton" onmouseover="highlightElementsToRemove();" onmouseleave="removeHighlightElementsToRemove();" onclick="mapCreator.removeElement($('.highlighted').attr('meta-removereference'));">REMOVE</a>
						
					</div>
				</div>
				
				
			</div>
		</div>

		<div class="divider"></div>

		<div class="row">





			<div class="col s3">
		      <ul id="myTabs" class="tabs" style="display: table-cell;border-right: 4px solid #009688;">
		   
		        <li class="tab col s12" id="conceptsTab" onclick="$('#myTabs').css('border-right-color', '#009688')">	<a href="#conceptsBox">Concepts</a>
		        </li>
		        <li class="tab col s12" id="predicatesTab" onclick="$('#myTabs').css('border-right-color', '#3f51b5')">
		        	<a href="#predicatesBox">Predicates</a>
		        </li>
		        <li class="tab col s12">
		        	<a href="#resultsBox">Results</a>
		        </li>
		      </ul>
		    </div>
		   

	        <!-- navigation panel -->
	        <!--
	        <ul class="collection">
		        <li class="collection-item" style="background-color: #9c27b0" 
		        	onclick="$('.hidable').hide();">Query</li>
		        <li class="collection-item light-green accent-3" onclick="$('.hidable').hide();$('#conceptsBox').show();">Concepts</li>
		        <li class="collection-item" style="background-color: #ff5722" onclick="$('.hidable').hide();$('#predicatesBox').show();">Predicates</li>
		        <li class="collection-item" style="background-color: #03a9f4">Operators</li>
		        <li class="collection-item" style="background-color: #d32f2f">Results</li>
		    </ul>
-->

<!--
			<ul class="section table-of-contents">
		        <li onclick="$('.hidable').hide();"><a href="#">Query</a></li>
		        <li onclick="$('.hidable').hide();$('#conceptsBox').show();"><a href="#conceptsBox">Concepts</a></li>
		        <li onclick="$('.hidable').hide();$('#predicatesBox').show();"><a href="#predicatesBox">Predicates</a></li>
		        <li><a href="#">Operators</a></li>
		        <li><a href="#resultsBox">Results</a></li>
		    </ul>
-->





	      <div class="col s9">
	        <!-- page content  -->
	        <div>

	        	<div id="conceptsBox" class="card col s12">
		            <div class="card-content ">
		              <span class="card-title">Concepts</span>

		              	  <input type="text" id="searchConceptsBox" class="search"
							onkeyup="filter('searchConceptsBox', 'conceptsBox')" 
							placeholder="Enter concept here..." title="Type in a concept">
						 
						<div id="conceptsListBox">
							<ul id="conceptsList"></ul>
						</div>
		            </div>
		          </div>

		          <div id="predicatesBox" class="card col s12">
		            <div class="card-content ">
		              <span class="card-title">Predicate</span>

	              	  <input type="text" id="searchPredicatesBox" class="search"
						onkeyup="filter('searchPredicatesBox', 'predicatesBox')" 
						placeholder="Search for a predicate..." title="Type in a predicate">

						<div id="predicatesListBox">
							<ul id="predicatesList"></ul>
						</div>
		            </div>
		          </div>


				<div id="resultsBox" class="hidable col s12">
					<!--<h1>Predicati</h1>-->
					<ul id="operatorList"></ul>
					<!--<input type="text" id="searchResultsBox" class="search"
						onkeyup="filter('searchResultsBox', 'resultsBox')" 
						placeholder="Search for a result..." title="Type in a result">-->
					<ul id="resultList"></ul>
				</div>
			</div>

	      </div>

	    </div>

		

		<div class="row">
			<div class="container">
				<div id="resultsTableBox" class="card col s12">
					<div class="card-content ">
			              <span class="card-title">Results</span>
			              <table id="resultsTable" class="striped">
						</table>
			              	  
			        </div>				
				</div>
			</div>
		</div>

	</body>

	<script>



		
		$(document).ready(function(){

			$('.hidable').hide();
			$('#conceptsBox').show();

			initBoxViewer();
			initQueryViewer();
			initResultViewer();

			fillConcepts();
			fillPredicates();


		});

		function highlightElementsToRemove(){

			var IDtoRemove = $('.highlighted').attr('meta-removereference');

			var spanToRemove = document.getElementById(IDtoRemove).parentNode.querySelectorAll('span');
			document.getElementById(IDtoRemove).parentNode.className += ' highlightRemove';

			$.each(spanToRemove, function(index){
				spanToRemove[index].className += ' highlightRemove';
			});
		}

		function removeHighlightElementsToRemove(){
			var toRemoveHightlight = $('.highlightRemove');

			$.each(toRemoveHightlight, function(index){
				toRemoveHightlight[index].setAttribute('class', toRemoveHightlight[index].getAttribute('class').replace(' highlightRemove', ''));
			});
		}

		function filter(inputName, boxName) {
		    var input, filter, box, li, text, i;
		    input = document.getElementById(inputName);
		    filter = input.value.toLowerCase();
		   	box = document.getElementById(boxName);
		    li = box.getElementsByTagName("li");
		    for (i = 0; i < li.length; i++) {
		        text = li[i].innerHTML;
		        if (text.toLowerCase().indexOf(filter) > -1) {
		            li[i].style.display = "";
		        } else {
		            li[i].style.display = "none";
		        }
		    }
		}

	</script>

</HTML>
